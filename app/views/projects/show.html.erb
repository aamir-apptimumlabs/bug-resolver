<h1>Project: <%= @project.name %> </h1>
<p> <%= @project.description %> </p>

<%# ---- %>
<ul>
  <% if current_user.role == 'manager' %>
    <li><%= link_to "Edit", edit_project_path(@project) %></li> 
    <li><%= link_to "Destroy", project_path(@project), data: {
          turbo_method: :delete,
          turbo_confirm: "Are you sure?"
        } %></li>
  <% end %>
</ul>

<%# Assign to QA %>
<%# <% if task.qa_id.present?  %>
        <%# <p><strong>Assigned QA:</strong> <%= User.find(task.qa_id).name</p>  %>
      <%# <% else  %>
        <%= form_with model: [@project], method: :put do |form| %>
          <%# <%= hidden_field_tag 'task_id', task.id  %>

          <div class="form-group"> 
            <%= label_tag 'QAs' %>
            <%# <%binding.pry%> 
           <%= select_tag 'project[assigned_to_qa][]', options_for_select(@users.where(role: 'qa').map { |user| [user.name, user.id] }, selected: @project.assigned_to_qa), multiple: true  %>
          </div>

          <%= submit_tag 'Assign To QA', class: 'btn btn-primary' %>
        <%# <% end  %>
<% end %>

<%# Tasks %>
<%= render template: 'tasks/index', locals: { tasks: @project.tasks } %>

<h2>Add a task:</h2>
<%= render "tasks/form" %>